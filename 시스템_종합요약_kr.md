# 자동 주식 거래 신호 시스템 종합 요약

## 1. 시스템 개요
본 시스템은 주식 데이터를 분석하여 기술적 지표 기반 매수/매도 신호를 자동으로 감지하고, 목표 수익률 달성 시 알림을 제공하는 자동화 도구입니다. 주요 신호는 볼린저 밴드와 MFI(Money Flow Index) 지표를 기반으로 생성되며, 특히 일본의 전설적 트레이더 BNF의 볼린저 밴드 전략을 응용하였습니다.

## 2. 핵심 구성 요소

### 2.1 데이터 수집
- Yahoo Finance API를 통한 실시간 주식 데이터 수집
- 설정 가능한 데이터 기간 및 간격 (기본: 100일, 일봉)

### 2.2 기술적 지표
- **볼린저 밴드**: 25일 이동평균선(MA25)을 중심으로 2배 표준편차
- **%B 지표**: 현재 가격이 밴드 내에서 위치하는 값 (0~1, 또는 범위 이탈)
- **MFI(Money Flow Index)**: 가격과 거래량을 결합한 자금 흐름 지표
- **MA25 이격도**: 현재 가격과 MA25 사이의 괴리율(%)

### 2.3 매매 신호 유형
- **Buy_Strong**: MA25 대비 20% 이상 하락, %B < 0.2 (과매도)
- **Buy**: MA25 대비 15% 하락, %B < 0.3, MFI < 30
- **Breakout_Buy**: 밴드 폭 축소(스퀴즈) 후 상단 돌파, 거래량 증가
- **Sell**: MA25 대비 10% 이상 상승, %B > 0.8, MFI > 70 (과매수)
- **Target_Reached**: 설정한 구매가 대비 목표 수익률 달성

### 2.4 알림 시스템
- Slack 웹훅을 통한 실시간 알림
- 신호 발생, 목표 수익률 달성, 강제 알림 기능 제공
- 일반 텍스트 및 블록 형식의 메시지 지원

### 2.5 스케줄링
- 매일 정해진 시간에 자동으로 신호 확인 및 알림
- 기본 설정: 한국 시간 오전 6시 (장 마감 후)

## 3. 백테스트 결과

### 3.1 볼린저 밴드 전략
- **테스트 기간**: 2022-04-26 ~ 2025-04-25
- **초기 자본**: $10,000
- **최종 포트폴리오 가치**: $12,863.97
- **총 수익률**: 28.64%
- **연간 수익률**: 9.04%
- **최대 낙폭(MDD)**: -13.43%
- **샤프 비율**: 0.56
- **거래 횟수**: 5회

### 3.2 단순 매수 후 보유 전략 (비교)
- **최종 포트폴리오 가치**: $14,336.52
- **총 수익률**: 43.37%
- **연간 수익률**: 13.18%
- **최대 낙폭(MDD)**: -18.61%
- **샤프 비율**: 0.67

### 3.3 전략 평가
- 볼린저 밴드 전략은 리스크 관리 측면에서 강점을 보임 (더 낮은 MDD)
- 강한 상승장에서는 매수 후 보유 전략의 수익률이 더 높음
- 변동성이 높거나 하락장에서는 볼린저 밴드 전략이 유리할 수 있음

## 4. 시스템 구조
```
auto-stock-trading/
├── main.py              # 메인 실행 파일
├── src/                 # 소스 코드 디렉토리
│   ├── config.py        # 설정 파일
│   ├── stock_data.py    # 주식 데이터 관련 기능
│   ├── indicators.py    # 기술적 지표 계산
│   ├── signal.py        # 매매 신호 생성
│   └── notification.py  # Slack 알림 관련 기능
├── test/                # 테스트 케이스
└── docs/                # 문서 디렉토리
```

## 5. 실행 방법

### 5.1 즉시 실행
```bash
# 기본 종목(PLTR) 즉시 분석
python main.py --now

# 특정 종목(AAPL) 분석
python main.py --now --ticker AAPL

# 목표 수익률 설정 (AAPL 주식, 구매가 $150.5, 목표 수익률 10%)
python main.py --now --stock-info AAPL/150.5/10
```

### 5.2 스케줄러 실행
```bash
# 기본 종목으로 스케줄러 실행
python main.py --schedule

# 특정 종목으로 스케줄러 실행
python main.py --schedule --ticker TSLA

# 목표 수익률 감시와 함께 스케줄러 실행
python main.py --schedule --stock-info NVDA/450.75/15
```

## 6. 개선 방향
1. **혼합 전략**: 볼린저 밴드의 리스크 관리와 장기 보유의 수익성을 결합
2. **파라미터 최적화**: 시장 상황에 따른 %B 및 MFI 임계값 동적 조정
3. **추가 지표 활용**: 추세 확인 지표를 병행하여 신호의 신뢰도 향상
4. **부분 매매 전략**: 전체 매수/매도보다 부분적 매매 전략 구현

## 7. 결론
본 시스템은 기술적 지표와 목표 수익률을 조합하여 효과적인 매매 신호를 제공합니다. 백테스트 결과, 리스크 관리 측면에서 강점을 보여주었으며, 특히 변동성이 높은 시장 환경에서 안정적인 성과를 기대할 수 있습니다. 투자자의 위험 선호도와 시장 상황에 맞게 파라미터를 조정하고, 필요에 따라 전략을 조합하여 사용하는 것이 바람직합니다. 