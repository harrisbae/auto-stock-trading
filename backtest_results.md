# 볼린저 밴드 기반 부분 매매 전략 백테스팅

## 전략 개요
- **기간**: 2022-05-31 ~ 2025-04-25 (1060일)
- **초기자본**: $10,000
- **대상**: SPY (S&P 500 ETF)
- **매매비율**: 매수/매도 시 보유 자산의 20% 
- **전략 구분**:
  - 볼린저 밴드 매수 신호 전략
  - 볼린저 밴드 매도 신호 전략
  - 목표수익률: 5%, 10%, 20%

## 매매 규칙

### 매수 신호
- **볼린저 밴드 매수 신호**: 볼린저 밴드 하단(MA25-2*STD) 아래로 주가 돌파 시
- **볼린저 밴드 매도 신호**: 볼힌저 밴드 하단 돌파 시 매수

### 매도 신호
- 평균 매수가 대비 목표 수익률(5%, 10%, 20%) 도달 시 또는 볼린저 밴드 매도 신호
- 매도/매수 시점의 현재가는 평균 매수가로 재설정

### 매매 절차
- **매수**: 현금의 20% 사용, 평균 매수가 재계산
- **매도**: 보유 주식의 20% 매도, 평균 매수가 유지

## 백테스팅 결과

### 전략별 주요 지표

| 전략 | 최종 자산 | 수익률 | 연간 수익률 | MDD | 샤프 비율 | 거래 횟수 |
|-----|---------|-------|-----------|-----|---------|---------|
| **BB매수 (5%)** | $12,246 | 22.5% | 7.2% | -12.2% | 0.556 | 484회 |
| **BB매수 (10%)** | $13,569 | 35.7% | 11.1% | -12.2% | 0.863 | 317회 |
| **BB매수 (20%)** | $13,813 | 38.1% | 11.8% | -13.6% | 0.876 | 113회 |
| **BB매도 (5%)** | $12,246 | 22.5% | 7.2% | -12.2% | 0.556 | 484회 |
| **BB매도 (10%)** | $13,569 | 35.7% | 11.1% | -12.2% | 0.863 | 317회 |
| **BB매도 (20%)** | $13,813 | 38.1% | 11.8% | -13.6% | 0.876 | 113회 |
| **Buy & Hold** | $13,932 | 39.3% | 12.4% | -18.8% | 0.625 | 1회 |

### 최종 포지션

| 전략 | 현금 | 주식 수량 | 평균 매수가 |
|-----|------|---------|------------|
| BB매수 (5%) | $869 | 20.66주 | $569.84 |
| BB매수 (10%) | $963 | 22.89주 | $569.84 |
| BB매수 (20%) | $763 | 23.70주 | $556.45 |
| BB매도 (5%) | $869 | 20.66주 | $569.84 |
| BB매도 (10%) | $963 | 22.89주 | $569.84 |
| BB매도 (20%) | $763 | 23.70주 | $556.45 |
| Buy & Hold | $0 | 25.22주 | $396.44 |

## 성과 분석

### 볼린저 밴드 전략 비교
- 이번 테스트에서는 매수 신호와 매도 신호 전략 간의 차이가 없음
  - 모든 목표 수익률에서 동일한 결과 도출
  - 이는 테스트 기간 동안 동일한 매수/매도 신호가 발생했기 때문

### 목표 수익률별 분석
- **수익률**: 목표 수익률 ↑ = 최종 수익률 ↑
  - 5%→10%→20% (22.5%→35.7%→38.1%)
- **거래 횟수**: 목표 수익률 ↑ = 거래 횟수 ↓ (크게 감소)
  - 484회→317회→113회 (연평균: 167회→109회→39회)
- **위험**: 목표 수익률 20%에서는 MDD가 소폭 증가
  - 5%/10%: -12.2% → 20%: -13.6%

### 위험 조정 수익률
- 20% 목표 수익률이 가장 효율적인 위험 조정 수익률 제공
  - 20%: 샤프 비율 0.876
  - 10%: 샤프 비율 0.863
  - 5%: 샤프 비율 0.556
- 매수홀드: 샤프 비율 0.625로 5% 목표보다는 높지만 10%, 20% 목표보다는 낮음
- 매수홀드의 MDD(-18.8%)는 볼린저 밴드 전략의 MDD보다 크게 높음

### 볼린저 밴드 효과
- 볼린저 밴드 기반 전략(20%)은 Buy & Hold와 큰 차이 없는 수익률을 보이면서도 위험은 크게 감소
- 거래 횟수가 목표 수익률에 따라 크게 차이남 (484회 vs 113회)
- 볼린저 밴드로 인한 매매신호와 목표 수익률에 의한 매매신호의 조합이 효과적

## 결론

- **최적 전략**: 볼린저 밴드 기반 20% 목표 수익률 전략 (위험 조정 수익률 기준)
  - 수익률: 38.1% (Buy & Hold의 39.3%와 유사)
  - 위험(MDD): -13.6% (Buy & Hold의 -18.8%보다 크게 감소)
  - 샤프 비율: 0.876 (Buy & Hold의 0.625보다 40% 높음)
- **거래 빈도**: 목표 수익률 20% 전략은 거래 횟수가 연평균 39회로 매우 적음
- **투자 시사점**: 
  - 높은 목표 수익률(20%)은 거래 비용 감소와 위험 조정 수익률 증가에 효과적
  - 볼린저 밴드는 시장 급락/급등 시 효과적인 매매 신호 제공
  - Buy & Hold 전략은 수익률은 높지만 위험도 크게 높아 투자자 성향에 따라 선택 필요

![백테스트 결과 그래프](backtest_bollinger_bands_multi_target_20250426.png) 