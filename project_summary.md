# 자동 주식 거래 신호 시스템 개발 요약

## 프로젝트 개요
볼린저 밴드 기반의 주식 거래 신호를 자동으로 생성하고 모니터링하는 시스템을 개발했습니다. 이 시스템은 기술적 지표와 위험 관리 전략을 결합하여 매수/매도 시점을 찾아내고, 사용자에게 Slack을 통해 알림을 제공합니다.

## 주요 기능

### 1. 볼린저 밴드 기반 매매 전략
- 하단밴드 터치 시 (%B < 0.2) 분할 매수 진입
- 상단밴드 터치 시 (%B > 0.8) 분할 매도
- 분할 매수/매도로 위험 분산 및 평균 단가 최적화

### 2. MFI 필터 기능
- 과매수(MFI > 80) 상태에서만 매도 신호 발생
- 과매도(MFI < 20) 상태에서만 매수 신호 발생
- 불필요한 거래 신호 필터링으로 거래 품질 향상

### 3. 밴드타기 감지 기능
- 상단밴드에 연속 접촉하는 강한 상승 추세 감지
- 추세 강도와 거래량 증가 패턴 분석
- 추세 추종 전략과 이익실현 타이밍 제안

### 4. 위험 관리 기능
- 위험 수준(low, medium, high)에 따른 맞춤형 전략
- 손절 전략 및 목표 수익률 관리
- 이격도, 밴드 기울기 등 다양한 지표 활용

### 5. 자동화 및 알림
- 스케줄링된 자동 신호 모니터링
- Slack 알림을 통한 실시간 거래 정보 제공
- 다양한 ETF 및 채권 종목에 대한 일괄 분석

## 기술 스택
- **언어**: Python
- **데이터 소스**: Yahoo Finance API
- **알림 서비스**: Slack Webhook
- **주요 라이브러리**: pandas, numpy, yfinance

## 주요 구성 요소

### `main.py`
- 메인 실행 프로그램
- 명령행 인수 처리 및 실행 모드 제어
- 거래 신호 체크 및 알림 전송 로직

### `src/signal.py`
- 거래 신호 생성 로직
- 기술적 지표 분석 및 신호 결정
- MFI 필터링 및 매매 조언 생성

### `src/stock_data.py`
- 주식 데이터 다운로드 및 처리
- Yahoo Finance API 연동

### `main.sh`
- 다양한 종목에 대한 일괄 분석 실행
- 커맨드라인 옵션 설정 (트랜치, 손절, MFI 필터 등)

## 주요 개선사항

### MFI 필터 구현
- 기존 볼린저 밴드 전략에 MFI 지표 추가
- 매매 신호 필터링으로 거짓 신호 감소
- 명령행 옵션을 통한 활성화/비활성화 기능

### 밴드타기 감지 시스템
- 연속적인 상단밴드 접촉 감지 알고리즘
- 추세 강도 및 거래량 분석
- 강한 상승 추세에서의 전략 조정

### 분할 매매 전략 고도화
- 트랜치 기반 분할 매수/매도 전략
- 위험 수준에 따른 자금 배분 최적화
- 목표 수익률 도달 시 이익실현 전략

## 실행 방법

```bash
# 기본 실행 (스케줄링 모드)
python main.py --ticker SPY

# 즉시 실행 모드
python main.py --now --ticker SPY --purchase-price 450 --target-gain 10

# 여러 종목 일괄 분석 (셸 스크립트 이용)
./main.sh
```

## 주요 매개변수
- `--tranche`: 분할 매수 단계 수 (기본값: 3)
- `--stop-loss`: 손절 비율 (기본값: 7%)
- `--band-riding`: 밴드타기 감지 옵션 (true/false)
- `--risk-management`: 위험 관리 수준 (low/medium/high)
- `--mfi-filter`: MFI 필터 적용 여부 (true/false)

## 백테스트 결과
볼린저 밴드 전략의 백테스트 결과, 다양한 파라미터 조합이 시장 상황에 따라 Buy & Hold 전략을 앞설 수 있음을 확인했습니다. 특히 MFI 필터를 적용한 전략은 매매 신호의 품질을 향상시키고 불필요한 거래를 줄이는 효과가 있었습니다.

## 향후 개선 방향
- 딥러닝 모델을 활용한 예측 기능 추가
- 더 많은 기술적 지표 조합 및 최적화
- 실시간 데이터 처리 및 API 연동 확장
- 포트폴리오 최적화 및 자산 배분 전략 통합 